import firebase_adminfrom firebase_admin import credentials, dbimport streamlit as stimport jsonimport tempfile# Initialize Firebasedef init_firebase():    if not firebase_admin._apps:        firebase_config = dict(st.secrets["FIREBASE"])        if "\\n" in firebase_config["private_key"]:            firebase_config["private_key"] = firebase_config["private_key"].replace("\\n", "\n")        with tempfile.NamedTemporaryFile(mode="w", delete=False) as temp_file:            json.dump(firebase_config, temp_file)            temp_path = temp_file.name        cred = credentials.Certificate(temp_path)        firebase_admin.initialize_app(cred, {            "databaseURL": "https://mlops-database-default-rtdb.europe-west1.firebasedatabase.app/"        })         # Format the submission and add the submission under the userdef save_submission(email, data):    clean_email = email.replace(".", "_")    ref = db.reference("submissions")    user_ref = ref.child(clean_email)    user_ref.push(data) # Check to see if user has a submissiondef has_valid_submission(email):    ref = db.reference("submissions")    submissions = ref.child(email.replace(".", "_")).get()    return bool(submissions) # Get all submissions from all users and put them in a listdef get_all_submissions():    ref = db.reference("submissions")    data = ref.get()    results = []    if data:        for user_entries in data.values():            if isinstance(user_entries, dict):                for submission in user_entries.values():                    if isinstance(submission, dict):                        results.append(submission)    return results